<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="门前大桥下">
<meta property="og:url" content="http://zhaosound.github.io/index.html">
<meta property="og:site_name" content="门前大桥下">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="门前大桥下">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'zhaoxiang'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://zhaosound.github.io/"/>





  <title>门前大桥下</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">门前大桥下</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">吃鸡</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://zhaosound.github.io/2018/01/17/消息队列/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zhaoxiang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="门前大桥下">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/17/消息队列/" itemprop="url">消息队列</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-17T14:25:06+08:00">
                2018-01-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><p>定义</p>
<ul>
<li>队列结构的中间件；</li>
<li>消息放入之后，不需要理解处理；</li>
<li>由订阅者/消费者按照顺序处理；</li>
</ul>
</li>
<li><p>场景</p>
<ul>
<li>冗余</li>
<li>解耦 </li>
<li>流量削峰</li>
<li>异步通信</li>
<li>扩展性</li>
<li>排序保证</li>
<li>……</li>
</ul>
</li>
<li><p>优缺点</p>
<ul>
<li>MySQL：可靠，简单，速度慢；</li>
<li>Redis：速度快，单个消息包过大的时候效率低；</li>
<li>消息系统：专业，可靠，学习成本高；             </li>
</ul>
</li>
<li><p>消息处理触发机制</p>
<ul>
<li>死循环方式读取：易实现，发生故障时无法及时恢复；</li>
<li>定时任务：压力均分，有处理量上限；</li>
<li>守护进程：类似php-fpm，php-cg；</li>
</ul>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://zhaosound.github.io/2018/01/12/Symfony表关联的一些问题/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zhaoxiang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="门前大桥下">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/12/Symfony表关联的一些问题/" itemprop="url">Symfony表关联的一些问题</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-12T10:24:11+08:00">
                2018-01-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><p>数据一般在owning side更新</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$user = new User();</span><br><span class="line">$myFirstComment = new Comment();</span><br><span class="line">$user-&gt;addComment($myFirstComment);</span><br><span class="line"></span><br><span class="line">$em-&gt;persist($user);</span><br><span class="line">$em-&gt;persist($myFirstComment); // required, if `cascade: persist` is not set</span><br><span class="line">$em-&gt;flush();</span><br></pre></td></tr></table></figure>
<p>  这里引入了<code>cascade</code>属性，在定义表关联的时候，显示指定的话，可以将上面代码的<code>$em-&gt;persist($myFirstComment);</code>逻辑放到User的Entity中</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public function comment(string $text, DateTimeInterface $time) : void</span><br><span class="line">   &#123;</span><br><span class="line">       $newComment = Comment::create($text, $time);</span><br><span class="line">       $newComment-&gt;setUser($this);</span><br><span class="line">       $this-&gt;comments-&gt;add($newComment);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>  这里的作用对象是新的entity，如果是从数据库取出的数据，doctrine本身就对其操作进行控制，不需要显示指定。</p>
</li>
<li>和Form有关的在这里看[<a href="http://symfony.com/doc/master/form/form_collections.html" target="_blank" rel="noopener">http://symfony.com/doc/master/form/form_collections.html</a>]<ul>
<li>需要配合js</li>
<li>可以在entity中添加add和remove方法，这两个方法都需要定义</li>
<li>form记得加上<code>by_reference=false</code></li>
<li>需要配置<code>cascade={&quot;persist&quot;}</code>   </li>
</ul>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://zhaosound.github.io/2018/01/11/WordPress简介/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zhaoxiang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="门前大桥下">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/11/WordPress简介/" itemprop="url">WordPress简介</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-11T14:54:02+08:00">
                2018-01-11
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li>安装&amp;使用灰常简单</li>
<li>本地搭建或者服务器搭建流程大致相同，服务器搭建的话需要通过ftp将下载完成的wordpress文件上传到服务器[<a href="https://codex.wordpress.org/Installing_WordPress" target="_blank" rel="noopener">https://codex.wordpress.org/Installing_WordPress</a>]</li>
<li>解压缩完成之后，访问域名根路径，会有安装引导，一些关于数据库配置的在这里完成，也可以直接复制wp-config-sample.php，命名wp-config.php，在文件中配置</li>
<li>。。。。。wordpress也没啥，不是二次开发的话，他的后台管理页面就差不多可以用。</li>
<li>bye….</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://zhaosound.github.io/2018/01/05/Symfony4开发项目步骤/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zhaoxiang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="门前大桥下">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/05/Symfony4开发项目步骤/" itemprop="url">Symfony4开发项目步骤</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-01-05T10:55:25+08:00">
                2018-01-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Symfony4发布之后，项目的创建，结构等都发生了一些变化，这里大概记录一下从零开始创建一个Symfony4项目的步骤"><a href="#Symfony4发布之后，项目的创建，结构等都发生了一些变化，这里大概记录一下从零开始创建一个Symfony4项目的步骤" class="headerlink" title="Symfony4发布之后，项目的创建，结构等都发生了一些变化，这里大概记录一下从零开始创建一个Symfony4项目的步骤"></a>Symfony4发布之后，项目的创建，结构等都发生了一些变化，这里大概记录一下从零开始创建一个Symfony4项目的步骤</h1><ul>
<li>使用composer新建项目：composer create-project symfony/skeleton symfony4</li>
<li><p>安装需要使用的Bundle</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">composer require annotations</span><br><span class="line">composer require --dev profiler</span><br><span class="line">composer require doctrine maker</span><br><span class="line">composer require twig</span><br><span class="line">composer require validator</span><br><span class="line">composer require asset</span><br><span class="line">composer require symfony/security-bundle(这个居然需要单独安装)</span><br><span class="line">composer require form(这个居然也要单独安装？？？？)</span><br></pre></td></tr></table></figure>
</li>
<li><p>关于数据库<br>手动安装doctrine maker之后，开发环境下在.env文件添加</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DATABASE_URL=&quot;mysql://db_user:db_password@127.0.0.1:3306/db_name&quot;</span><br></pre></td></tr></table></figure>
<p>相关命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">php bin/console doctrine:database:create</span><br><span class="line">php bin/console make:entity Product</span><br><span class="line">php bin/console doctrine:migrations:diff</span><br><span class="line">php bin/console doctrine:migrations:migrate</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>生成controller</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php bin/console make:controller ProductController</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li>关于js和css<br>symfony3中一直使用assetic管理样式文件，在symfony4中标推荐使用webpack encore<br>可以使用yarn或者npm进行包管理，symfony官方推荐yarn<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">brew install yarn</span><br><span class="line">yarn add @symfony/webpack-encore --dev</span><br><span class="line">yarn run encore dev (--watch)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>关于模板<br>所有的twig文件放在根目录下templates路径下   </p>
</li>
<li><p>很多symfony3自带的Bundle现在需要单独安装</p>
</li>
<li>登陆活的ROLE之后但是没有user可能的原因：User需要实现序列化接口   </li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://zhaosound.github.io/2017/12/19/Python学习/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zhaoxiang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="门前大桥下">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/19/Python学习/" itemprop="url">Python学习</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-19T13:23:53+08:00">
                2017-12-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li>安装 <code>brew install python3</code></li>
<li>mac自带python2.7，不建议卸载，可直接安装python3，也可以使用多版本管理工具pyenv等</li>
<li>进入交互模式: <code>python3</code></li>
<li>使用缩进阻止代码块，大小写敏感</li>
<li>可以使用<code>&#39;&#39;&#39;...&#39;&#39;&#39;</code>代表多行内容</li>
<li>空值是<code>none</code></li>
<li>python是动态语言，变量类型不固定</li>
<li><p>列表list</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">classmates = [&apos;Michael&apos;, &apos;Bob&apos;, &apos;Tracy&apos;]</span><br><span class="line">len(classmates)  =&gt;3</span><br><span class="line">classmates[-1]   =&gt;Tracy</span><br><span class="line">classmates.append(&apos;Adam&apos;)  =&gt; [&apos;Michael&apos;, &apos;Bob&apos;, &apos;Tracy&apos;, &apos;Adam&apos;]</span><br><span class="line">classmates.insert(1, &apos;Jack&apos;) =&gt; [&apos;Michael&apos;, &apos;Jack&apos;, &apos;Bob&apos;, &apos;Tracy&apos;, &apos;Adam&apos;]</span><br><span class="line">classmates.pop() =&gt;删除最后一个元素</span><br><span class="line">classmates.pop(1) =&gt;删除指定元素</span><br></pre></td></tr></table></figure>
</li>
<li><p>元组tuple, 有序列表,tuple一旦初始化就不能修改</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">classmates = (&apos;Michael&apos;, &apos;Bob&apos;, &apos;Tracy&apos;)</span><br><span class="line">```  </span><br><span class="line">有1个元素的tuple定义时必须加一个逗号`,`</span><br></pre></td></tr></table></figure>
<p>t = (1,)  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* dict，键值对</span><br></pre></td></tr></table></figure>
<p>d = {‘Michael’: 95, ‘Bob’: 75, ‘Tracy’: 85}<br>d[‘Michael’]<br>‘Thomas’ in d  =&gt; False<br>d.get(‘Thomas’) =&gt; None<br>d.pop(‘Bob’) =&gt; 删除</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* set</span><br></pre></td></tr></table></figure>
<p>s = set([1, 1, 2, 2, 3, 3]) =&gt; {1, 2, 3}</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">* 运算</span><br><span class="line">    布尔值运算可以使用`and`,`or`,`not`</span><br><span class="line">    `%`取余, `//`取整</span><br><span class="line">* 条件控制</span><br></pre></td></tr></table></figure>
<p>  age = 3<br>  if age &gt;= 18:</p>
<pre><code>print(&apos;adult&apos;)
</code></pre><p>  elif age &gt;= 6:</p>
<pre><code>print(&apos;teenager&apos;)
</code></pre><p>  else:</p>
<pre><code>print(&apos;kid&apos;)
</code></pre>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">* 循环</span><br><span class="line">    for...in</span><br></pre></td></tr></table></figure>
<p>  sum = 0<br>  for x in range(101):</p>
<pre><code>sum = sum + x
</code></pre><p>  print(sum)</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">while</span><br></pre></td></tr></table></figure>
<p>  sum = 0<br>  n = 99<br>  while n &gt; 0:</p>
<pre><code>sum = sum + n
n = n - 2
</code></pre><p>  print(sum)</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* 函数</span><br></pre></td></tr></table></figure>
<p>  def my_abs(x):</p>
<pre><code>if x &gt;= 0:
    return x
else:
    return -x
</code></pre>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">支持默认参数</span><br></pre></td></tr></table></figure>
<p>  def power(x, n=2):</p>
<pre><code>s = 1
while n &gt; 0:
    n = n - 1
    s = s * x
return s
</code></pre>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* 常用函数</span><br></pre></td></tr></table></figure>
<p>  获取用户输入 input()<br>  输出 print(“hello world”)<br>  格式化输出 ‘Hello, %s’ % ‘world’<br>  ```</p>
</li>
<li>爬虫<br>  Scrapy框架<br>  安装：pip3 install scrapy<br>  scrapy startproject tutorial    </li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://zhaosound.github.io/2017/12/19/swoole相关/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zhaoxiang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="门前大桥下">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/19/swoole相关/" itemprop="url">swoole相关</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-19T09:53:29+08:00">
                2017-12-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li>需要了解的知识<ul>
<li>多进程/多线程<ul>
<li>了解Linux操作系统进程和线程的概念</li>
<li>了解Linux进程/线程切换调度的基本知识</li>
<li>了解进程间通信的基本知识，如管道、UnixSocket、消息队列、共享内存</li>
</ul>
</li>
<li>SOCKET<ul>
<li>了解SOCKET的基本操作如accept/connect、send/recv、close、listen、bind</li>
<li>了解SOCKET的接收缓存区、发送缓存区、阻塞/非阻塞、超时等概念</li>
</ul>
</li>
<li>IO复用<ul>
<li>了解select/poll/epoll</li>
<li>了解基于select/epoll实现的事件循环，Reactor模型</li>
<li>了解可读事件、可写事件</li>
</ul>
</li>
<li>TCP/IP网络协议<ul>
<li>了解TCP/IP协议</li>
<li>了解TCP、UDP传输协议</li>
</ul>
</li>
<li>调试工具<ul>
<li>使用 gdb 调试Linux程序</li>
<li>使用 strace 跟踪进程的系统调用</li>
<li>使用 tcpdump 跟踪网络通信过程</li>
<li>其他Linux系统工具，如ps、lsof、top、vmstat、netstat、sar、ss等</li>
</ul>
</li>
</ul>
</li>
<li>未完待续                                         </li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://zhaosound.github.io/2017/12/17/vagrant搭建开发环境/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zhaoxiang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="门前大桥下">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/17/vagrant搭建开发环境/" itemprop="url">vagrant搭建开发环境</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-17T12:50:05+08:00">
                2017-12-17
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li>下载vagrant</li>
<li>下载vm(推荐virtual box，pd软件本身收费，box那个工具也是收费的)</li>
<li><p>直接下载官网提供的box(可能会比较慢，自备梯子)<br>  举个栗子</p>
   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vagrant box add envimation/ubuntu-xenial-docker(虚拟机名称) https://atlas.hashicorp.com/envimation/boxes/ubuntu-xenial-docker(box名称)</span><br></pre></td></tr></table></figure>
</li>
<li><p>在当前路径执行</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vagrant init envimation/ubuntu-xenial-docker(虚拟机名称)</span><br></pre></td></tr></table></figure>
<p>  上面的命令会在当前路径生成 Vagrantfile 和 .vagrant目录，主要的配置都在Vagrantfile中</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vagrant up 启动当前虚拟机</span><br><span class="line">vagrant ssh ssh到当前虚拟机</span><br></pre></td></tr></table></figure>
<p>  虚拟机搭建完成之后，默认刚刚执行命令的路径会映射到虚拟机的/vagrant目录<br>  个性化配置在Vagrantfile中，修改完成执行    </p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vagrant reload</span><br></pre></td></tr></table></figure>
<p>  静态ip访问: </p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">config.vm.network :private_network, ip: &quot;192.168.10.11&quot;</span><br></pre></td></tr></table></figure>
<p>  映射端口: </p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">config.vm.network &quot;forwarded_port&quot;, guest: 80, host: 1234</span><br></pre></td></tr></table></figure>
</li>
<li><p>关于与其他人协同工作：</p>
<ul>
<li><p>个性化定制当前的虚拟机，比如要安装Apache<br>  方法一： 直接ssh之后在命令行安装，这样方便，但是缺点就是其他人没法用相同的环境一键安装<br>  方法二：在根目录新建脚本文件，然后修改Vagrantfile</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">config.vm.provision :shell, path: &quot;bootstrap.sh&quot;</span><br></pre></td></tr></table></figure>
<p>  这里的bootstrap.sh的内容可以是这样的：</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env bash</span><br><span class="line"></span><br><span class="line">apt-get update</span><br><span class="line">apt-get install -y apache2</span><br><span class="line">if ! [ -L /var/www ]; then</span><br><span class="line">  rm -rf /var/www</span><br><span class="line">  ln -fs /vagrant /var/www</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<p>  这样其他人拿到配置文件之后安装的时候就会自动安装Apache了。</p>
</li>
</ul>
</li>
<li><p>一些其他注意事项：</p>
<ul>
<li>关于Apache作为服务器时候的权限问题：<br>  在主机通过域名/ip/端口访问虚拟机，默认的用户是vagrant，所属组是vagrant docker,可能需要到配置文件修改</li>
<li>每次启动都检查更新真的很烦，添加一下代码就好了<br>  config.vm.box_check_update = false</li>
</ul>
</li>
<li><p>常用命令</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">vagrant init       # 初始化</span><br><span class="line">vagrant up         # 启动虚拟机</span><br><span class="line">vagrant suspend    # 挂起虚拟机</span><br><span class="line">vagrant halt       # 关闭虚拟机</span><br><span class="line">vagrant reload     # 重启虚拟机</span><br><span class="line">vagrant ssh        # SSH 至虚拟机</span><br><span class="line">vagrant status     # 查看虚拟机运行状态</span><br><span class="line">vagrant destroy    # 销毁当前虚拟机</span><br><span class="line"></span><br><span class="line">vagrant box list   # 查看目前已有的box</span><br><span class="line">vagrant box add    # 增加box</span><br><span class="line">vagrant box remove # 删除box</span><br></pre></td></tr></table></figure>
</li>
<li><p>打包相关<br>  打包前关闭虚拟机(vagrant halt)<br>  vagrant package (–ouput box名称)    </p>
</li>
<li><p>补充<br>  网络问题的话可以把镜像box下载到本地，然后<code>vagrant add 虚拟机名 本地镜像名</code><br>  ubuntu安装缓慢的话可以更改源文件配置(更改下载镜像地址，比如使用阿里云)<br>  共享目录config.vm.synced_folder “本机目录”, “虚拟机目录”<br>  更改虚拟机的名字 vb.name=”名字”(写在config.vm.provider内部)<br>  在虚拟机启动过程中出现问题，可以修改配置文件 vb.gui = true 进行调试</p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://zhaosound.github.io/2017/12/14/less学习记录/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zhaoxiang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="门前大桥下">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/14/less学习记录/" itemprop="url">less学习记录</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-14T11:30:16+08:00">
                2017-12-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><p>变量：使用’@’定义</p>
  <figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@color:</span> <span class="number">#4D926F</span>;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#header</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="variable">@color</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">h2</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="variable">@color</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  编译成</p>
  <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#header</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#4D926F</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">h2</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#4D926F</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>混合：类似继承</p>
  <figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.rounded-corners</span> (<span class="variable">@radius</span>: <span class="number">5px</span>) &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="variable">@radius</span>;</span><br><span class="line">  <span class="attribute">-webkit-border-radius</span>: <span class="variable">@radius</span>;</span><br><span class="line">  <span class="attribute">-moz-border-radius</span>: <span class="variable">@radius</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#header</span> &#123;</span><br><span class="line">  <span class="selector-class">.rounded-corners</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#footer</span> &#123;</span><br><span class="line">  <span class="selector-class">.rounded-corners</span>(<span class="number">10px</span>);</span><br><span class="line">&#125;</span><br><span class="line">```    </span><br><span class="line">编译成</span><br><span class="line">```<span class="selector-tag">css</span></span><br><span class="line"><span class="selector-id">#header</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">-webkit-border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">-moz-border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="selector-id">#footer</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">-webkit-border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">-moz-border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>嵌套规则:在一个选择器中嵌套另一个选择器来实现继承</p>
  <figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#header</span> &#123;</span><br><span class="line">  <span class="selector-tag">h1</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">26px</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">p</span> &#123; <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="selector-tag">a</span> &#123; <span class="attribute">text-decoration</span>: none;</span><br><span class="line">      <span class="selector-tag">&amp;</span><span class="selector-pseudo">:hover</span> &#123; <span class="attribute">border-width</span>: <span class="number">1px</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">```  </span><br><span class="line">编译成</span><br><span class="line">```<span class="selector-tag">css</span></span><br><span class="line"><span class="selector-id">#header</span> <span class="selector-tag">h1</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">26px</span>;</span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#header</span> <span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#header</span> <span class="selector-tag">p</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">text-decoration</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#header</span> <span class="selector-tag">p</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">border-width</span>: <span class="number">1px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>函数 &amp; 运算:加，减，乘，除操作,属性值和颜色的运算</p>
<pre><code class="less"><span class="variable">@the-border:</span> <span class="number">1px</span>;
<span class="variable">@base-color:</span> <span class="number">#111</span>;
<span class="variable">@red:</span>        <span class="number">#842210</span>;

<span class="selector-id">#header</span> {
  <span class="attribute">color</span>: <span class="variable">@base-color</span> * <span class="number">3</span>;
  <span class="attribute">border-left</span>: <span class="variable">@the-border</span>;
  <span class="attribute">border-right</span>: <span class="variable">@the-border</span> * <span class="number">2</span>;
}
<span class="selector-id">#footer</span> { 
  <span class="attribute">color</span>: <span class="variable">@base-color</span> + <span class="number">#003300</span>;
  <span class="attribute">border-color</span>: desaturate(<span class="variable">@red</span>, <span class="number">10%</span>);
}
</code></pre>
<p>  编译成</p>
<pre><code class="css"><span class="selector-id">#header</span> {
  <span class="attribute">color</span>: <span class="number">#333</span>;
  <span class="attribute">border-left</span>: <span class="number">1px</span>;
  <span class="attribute">border-right</span>: <span class="number">2px</span>;
}
<span class="selector-id">#footer</span> { 
  <span class="attribute">color</span>: <span class="number">#114411</span>;
  <span class="attribute">border-color</span>: <span class="number">#7d2717</span>;
}
</code></pre>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://zhaosound.github.io/2017/12/12/JWT/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zhaoxiang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="门前大桥下">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/12/JWT/" itemprop="url">JWT</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-12T10:59:45+08:00">
                2017-12-12
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li>Json web token</li>
<li>在网络应用环境间传递声明而执行的一种基于JSON的开放标准</li>
<li>基于token的鉴权机制<ul>
<li>用户使用用户名密码来请求服务器</li>
<li>服务器进行验证用户的信息</li>
<li>服务器通过验证发送给用户一个token</li>
<li>客户端存储token，并在每次请求时附送上这个token值</li>
<li>服务端验证token值，并返回数据</li>
</ul>
</li>
<li><p>JWT的构成</p>
<ul>
<li><p>头部header</p>
<ul>
<li>声明类型，这里是jwt</li>
<li><p>声明加密的算法 通常直接使用 HMAC SHA256      </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &apos;typ&apos;: &apos;JWT&apos;,</span><br><span class="line">  &apos;alg&apos;: &apos;HS256&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>然后将头部进行base64加密（该加密是可以对称解密的)</p>
</li>
</ul>
</li>
<li><p>载荷payload</p>
<ul>
<li>存放有效信息的地方</li>
<li><p>包含三个部分</p>
<ul>
<li>标准中注册的声明(建议但不强制使用)<ul>
<li>iss: jwt签发者</li>
<li>sub: jwt所面向的用户</li>
<li>aud: 接收jwt的一方</li>
<li>exp: jwt的过期时间，这个过期时间必须要大于签发时间</li>
<li>nbf: 定义在什么时间之前，该jwt都是不可用的.</li>
<li>iat: jwt的签发时间</li>
<li>jti: jwt的唯一身份标识，主要用来作为一次性token,从而回避重放攻击。</li>
</ul>
</li>
<li>公共的声明，公共的声明可以添加任何的信息，一般添加用户的相关信息或其他业务需要的必要信息.但不建议添加敏感信息，因为该部分在客户端可解密。</li>
<li>私有的声明，提供者和消费者所共同定义的声明，一般不建议存放敏感信息，因为base64是对称解密的，意味着该部分信息可以归类为明文信息。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;sub&quot;: &quot;1234567890&quot;,</span><br><span class="line">  &quot;name&quot;: &quot;John Doe&quot;,</span><br><span class="line">  &quot;admin&quot;: true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>然后将其进行base64加密，得到Jwt的第二部分            </p>
</li>
</ul>
</li>
<li>签名signature<ul>
<li>header (base64后的)</li>
<li>payload (base64后的)</li>
<li>secret<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">        <span class="keyword">var</span> encodedString = base64UrlEncode(header) + <span class="string">'.'</span> + base64UrlEncode(payload);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">var</span> signature = HMACSHA256(encodedString, <span class="string">'secret'</span>);</span><br><span class="line">        <span class="string">``</span><span class="string">`     </span></span><br><span class="line"><span class="string">* secret是保存在服务器端的，jwt的签发生成也是在服务器端的，secret就是用来进行jwt的签发和jwt的验证，所以，它就是你服务端的私钥，在任何场景都不应该流露出去。一旦客户端得知这个secret, 那就意味着客户端是可以自我签发jwt了</span></span><br><span class="line"><span class="string">* 一般是在请求头里加入Authorization，并加上Bearer标注：</span></span><br><span class="line"><span class="string">    `</span><span class="string">``</span>javascript</span><br><span class="line">    fetch(<span class="string">'api/user/1'</span>, &#123;</span><br><span class="line">      headers: &#123;</span><br><span class="line">        <span class="string">'Authorization'</span>: <span class="string">'Bearer '</span> + token</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
<li><p>优点</p>
<ul>
<li>因为json的通用性，所以JWT是可以进行跨语言支持的，像JAVA,JavaScript,NodeJS,PHP等很多语言都可以使用。</li>
<li>因为有了payload部分，所以JWT可以在自身存储一些其他业务逻辑所必要的非敏感信息。</li>
<li>便于传输，jwt的构成非常简单，字节占用很小，所以它是非常便于传输的。</li>
<li>它不需要在服务端保存会话信息, 所以它易于应用的扩展</li>
</ul>
</li>
<li>其他<ul>
<li>不应该在jwt的payload部分存放敏感信息，因为该部分是客户端可解密的部分。</li>
<li>保护好secret私钥，该私钥非常重要。</li>
<li>如果可以，请使用https协议        </li>
</ul>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://zhaosound.github.io/2017/12/05/Symfony-4-升级注意事项/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zhaoxiang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="门前大桥下">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/12/05/Symfony-4-升级注意事项/" itemprop="url">Symfony 4 注意事项</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-12-05T15:41:19+08:00">
                2017-12-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="https://symfony.com/doc/current/setup/flex.html#upgrading-existing-applications-to-flex" target="_blank" rel="noopener">升级指南</a><br><a href="https://symfony.com/pdf/Symfony_best_practices_4.0.pdf" target="_blank" rel="noopener">Best practice</a></p>
<ul>
<li>创建新项目不再使用<code>symfony new xxx</code>, 现在使用<code>composer create-project symfony/skeleton my-project-flex</code>;</li>
<li>parameters.*.yml不再使用，直接放到config/services.yaml;</li>
<li>不建议自己新建Bundle: <code>Don&#39;t create any bundle to organize your application logic.</code>;</li>
<li>入口文件为<code>public/index.php</code>,不再使用<code>app_dev.php</code>和<code>app.php</code>;</li>
<li>在.env.dist定义在不同的设备上可能不同的环境变量</li>
<li>在config/services.yaml配置一些应用级的选项(例如邮件发送地址等)，一般不需要改动</li>
<li>有些配置建议使用常量来完成: <code>Use constants to define configuration options that rarely change.</code>,这点见仁见智吧，例如文章一页显示多少条的这种就适合用常量定义，然后放在entity，这样的话可以直接在twig访问</li>
<li>建议所有的配置参数都加前缀，例如app.xxxxx, 避免和第三方的Bundle参数混淆</li>
<li><p>service注册建议使用默认的写法，自动注册</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># makes classes in src/ available to be used as services</span><br><span class="line"># this creates a service per class whose id is the fully-qualified class name</span><br><span class="line">App\:</span><br><span class="line">    resource: &apos;../src/*&apos;</span><br><span class="line">    exclude: &apos;../src/&#123;Entity,Migrations,Tests&#125;&apos;</span><br><span class="line"></span><br><span class="line"># controllers are imported separately to make sure services can be injected</span><br><span class="line"># as action arguments even if you don&apos;t extend any base controller class</span><br><span class="line">App\Controller\:</span><br><span class="line">    resource: &apos;../src/Controller&apos;</span><br><span class="line">    tags: [&apos;controller.service_arguments&apos;]</span><br><span class="line"></span><br><span class="line"># add more service definitions when explicit configuration is needed</span><br><span class="line"># please note that last definitions always *replace* previous ones</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用yaml格式定义service<br>  <code>Use the YAML format to define your own services.</code><br>  这点随意，官方只是说这样子更简洁，并且对初学者比较友好</p>
</li>
<li>controller的方法命名不要加后缀’Action’:<code>Don&#39;t add the Action suffix to the methods of the controller actions.</code><br>  emmmm这个就很。。。。好吧之前都写习惯了，加不加看个人爱好</li>
<li>不要使用@Template方法: <code>Don&#39;t use the @Template annotation to configure the template used by the controller.</code><br>  简言之，使用的话弊大于利，反正我也不喜欢用，不是很直观</li>
<li>Use lowercased snake_case for directory and template names.</li>
<li>Use a prefixed underscore for partial templates in template names.</li>
<li>在src/Twig目录下防止twig extension，不需要手动注册<pre><code>Define your Twig extensions in the src/Twig/ directory. Your application will automatically detect them and configure them
</code></pre></li>
<li>assets的管理开始使用webpack了，这点蛮好的。    </li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">zhaoxiang</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">11</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">8</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">zhaoxiang</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
